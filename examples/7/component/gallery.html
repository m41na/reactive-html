<ons-page id="gallery">
    <style>
      .gallery-image {
        width: 100%;
      }
    </style>
  
    <script>
    document.addEventListener('show', ({ target }) => {
        if (target.matches('#gallery')) {
            const { itemPath, savedItems } = document.querySelector('#navigator').topPage.data;

            const carousel = document.querySelector('#carousel');

            // figure out what new products have been saved since we last showed the gallery
            // this way we don't accidentally add the same products twice
            const sliceIndex = carousel.itemCount - savedItems.length;

            if (sliceIndex !== 0) { // if there are unadded products
                const unsavedItems = savedItems.slice(sliceIndex);

                unsavedItems.map(number => {
                    const carouselItem = ons.createElement(`
                    <ons-carousel-item>
                        <ons-card>
                        <img class="gallery-image" src="img/${number}.jpg" />
                        </ons-card>
                    </ons-carousel-item>
                    `);

                    carousel.appendChild(carouselItem);
                });
            }

            // go to the selected products
            carousel.setActiveIndex(savedItems.indexOf(itemPath));
        }
    });
    </script>
  
    <ons-toolbar id="picture-toolbar">
      <div class="left">
        <ons-back-button></ons-back-button>
      </div>
    </ons-toolbar>
  
    <ons-carousel id="carousel" fullscreen swipeable auto-scroll auto-scroll-ratio="0.1">
    </ons-carousel>
  </ons-page>